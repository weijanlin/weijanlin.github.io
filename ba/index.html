<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>老屋新生：台灣危老重建補助完整指南</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts (Noto Sans TC) -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- Icons (Phosphor Icons - Loaded via script for Canvas usage context fallback) -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>

    <!-- REQUIRED PLACEHOLDERS -->
    <!-- Chosen Palette: "Warm Foundation" - Stone (Background/Neutral), Brick Orange (Accent/Action), Sage Green (Success/Safe), Slate (Text) -->
    
    <!-- Application Structure Plan: 
         Structure: Dashboard-style Single Page Application with three distinct interactive zones.
         1. Hero Section: Sets the tone and context.
         2. "Eligibility Wizard" (The Core): Addresses the user's specific question "What are the conditions?" via a step-by-step interactive questionnaire rather than a dense wall of text.
         3. "Benefit Visualizer": Uses charts to explain the "Why" (Incentives/FAR bonuses) which is the natural follow-up question to "Can I do it?".
         4. "Process Timeline": A linear visual guide to the execution phase.
         Why this structure? The policy is complex. Breaking it down into "Check Eligibility" -> "See Value" -> "Understand Steps" creates a logical user journey from curiosity to action.
    -->

    <!-- Visualization & Content Choices:
         1. Eligibility Wizard (Interactive HTML/JS):
            - Goal: Simplify complex legal criteria (Urban area, age, safety rating, consent).
            - Method: Boolean logic flow.
            - Justification: Users want a quick "Yes/No" indication before reading legal text.
         
         2. Floor Area Ratio (FAR) Bonus Simulator (Chart.js - Stacked Bar):
            - Goal: Visualize the abstract concept of "Volume Reward" (容積獎勵).
            - Method: Stacked bar comparing "Original" vs. "Potential Max".
            - Interaction: User inputs land size (ping); chart updates dynamically.
            - Justification: Hard numbers are dry; seeing the "extra building space" bar grow is compelling.
            
         3. Tax Benefit Timeline (HTML/CSS Grid):
            - Goal: Show the duration of tax breaks.
            - Method: Simple timeline cards.
            - Justification: Simple temporal data doesn't require a heavy chart library.
    -->

    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #f5f5f4; /* Stone-100 */
            color: #1c1917; /* Stone-900 */
        }

        /* Chart Container Styling - MANDATORY REQUIREMENT */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px; /* Constraint for large screens */
            height: 300px;    /* Default height */
            margin-left: auto;
            margin-right: auto;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px; /* Taller on desktop */
            }
        }

        .step-card {
            transition: all 0.3s ease;
        }
        .step-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Custom Scrollbar for cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #d6d3d1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a8a29e; 
        }

        .active-tab {
            border-bottom: 3px solid #ea580c; /* Orange-600 */
            color: #ea580c;
            font-weight: 700;
        }

        .method-tab-active {
            border-bottom: 4px solid #3b82f6;
            color: #1d4ed8;
            font-weight: 700;
        }

        .official-stamp {
            border: 3px solid #ef4444;
            color: #ef4444;
            transform: rotate(-15deg);
            padding: 2px 8px;
            font-weight: bold;
            display: inline-block;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Navigation / Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16 items-center">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-orange-600 rounded-lg flex items-center justify-center text-white font-bold text-lg">危</div>
                    <span class="font-bold text-xl tracking-wide text-stone-800">危老重建指南</span>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <button onclick="switchTab('eligibility')" id="nav-eligibility" class="active-tab px-1 pt-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors">資格檢測</button>
                    <button onclick="switchTab('incentives')" id="nav-incentives" class="px-1 pt-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors">獎勵試算</button>
                    <button onclick="switchTab('subsidies')" id="nav-subsidies" class="px-1 pt-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors">政府補助</button>
                    <button onclick="switchTab('query')" id="nav-query" class="px-1 pt-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors">都市計畫查詢</button>
                    <button onclick="switchTab('process')" id="nav-process" class="px-1 pt-1 text-sm font-medium text-stone-500 hover:text-stone-700 transition-colors">申請流程</button>
                </nav>
                <div class="md:hidden">
                    <!-- Mobile menu button placeholder -->
                    <button class="text-stone-500 hover:text-stone-900" onclick="alert('請使用上方標籤頁切換功能體驗完整內容。')">
                        <i class="ph ph-list text-2xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">
        
        <!-- Intro Hero -->
        <section class="mb-10 text-center">
            <h1 class="text-3xl md:text-4xl font-bold text-stone-800 mb-4">您的老屋符合危老重建條件嗎？</h1>
            <p class="max-w-2xl mx-auto text-lg text-stone-600">
                依據《都市危險及老舊建築物加速重建條例》，政府提供容積獎勵、稅賦優惠與補助，協助民眾改善居住安全。
                本工具協助您快速了解申請條件、獎勵試算、政府補助、都市計畫查詢與申請流程。
            </p>
        </section>

        <!-- VIEW 1: Eligibility Wizard (Conditions) -->
        <section id="view-eligibility" class="space-y-8 animate-fade-in">
            <div class="bg-white rounded-xl shadow-lg border border-stone-200 overflow-hidden">
                <div class="p-6 md:p-8 bg-stone-50 border-b border-stone-200">
                    <h2 class="text-2xl font-bold text-stone-800 flex items-center gap-2">
                        <i class="ph ph-clipboard-text text-orange-600"></i>
                        條件檢測 (Eligibility Check)
                    </h2>
                    <p class="mt-2 text-stone-600">
                        危老條例的適用條件主要分為「基地條件」、「屋齡/安全」與「整合程度」三大面向。請依序回答以下問題：
                    </p>
                </div>

                <div class="p-6 md:p-8">
                    <!-- Progress Bar -->
                    <div class="w-full bg-stone-200 rounded-full h-2.5 mb-8">
                        <div id="progress-bar" class="bg-orange-600 h-2.5 rounded-full transition-all duration-500" style="width: 25%"></div>
                    </div>

                    <!-- Question Container -->
                    <div id="quiz-container" class="min-h-[300px]">
                        <!-- Questions will be injected here by JS -->
                    </div>

                    <!-- Result Container (Hidden initially) -->
                    <div id="result-container" class="hidden text-center py-8">
                        <div id="result-icon" class="text-6xl mb-4 flex justify-center"></div>
                        <h3 id="result-title" class="text-2xl font-bold text-stone-800 mb-2"></h3>
                        <p id="result-desc" class="text-stone-600 max-w-lg mx-auto mb-6"></p>
                        <button onclick="resetQuiz()" class="px-6 py-2 bg-stone-200 text-stone-700 font-semibold rounded-lg hover:bg-stone-300 transition">重新檢測</button>
                    </div>
                </div>
            </div>

            <!-- Detailed Conditions Reference -->
            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-100">
                    <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mb-4 text-2xl">
                        <i class="ph ph-map-pin"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2">1. 適用範圍</h3>
                    <ul class="text-stone-600 text-sm space-y-2 list-disc list-inside">
                        <li>必須位於<strong>都市計畫區</strong>內。</li>
                        <li>非主管機關指定具有歷史、文化、藝術及紀念價值之建築物。</li>
                    </ul>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-100">
                    <div class="w-12 h-12 bg-red-100 text-red-600 rounded-full flex items-center justify-center mb-4 text-2xl">
                        <i class="ph ph-warning"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2">2. 危險或老舊</h3>
                    <ul class="text-stone-600 text-sm space-y-2 list-disc list-inside">
                        <li><strong>危險：</strong>經評估需強制拆除，或結構安全評估未達最低等級。</li>
                        <li><strong>老舊：</strong>屋齡30年以上，無電梯，且耐震評估未達標準者。</li>
                    </ul>
                </div>

                <div class="bg-white p-6 rounded-lg shadow-sm border border-stone-100">
                    <div class="w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center mb-4 text-2xl">
                        <i class="ph ph-users-three"></i>
                    </div>
                    <h3 class="font-bold text-lg mb-2">3. 產權整合</h3>
                    <ul class="text-stone-600 text-sm space-y-2 list-disc list-inside">
                        <li>需取得計畫範圍內<strong>100%</strong>土地及合法建築物所有權人同意。</li>
                        <li>這是最困難也最關鍵的一步。</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- VIEW 2: Incentives Calculator (Visualizer) -->
        <section id="view-incentives" class="hidden space-y-8 animate-fade-in">
            <div class="grid lg:grid-cols-3 gap-8">
                <!-- Controls -->
                <div class="lg:col-span-1 space-y-6">
                    <div class="bg-white p-6 rounded-xl shadow-lg border border-stone-200">
                        <h2 class="text-xl font-bold text-stone-800 mb-4">容積獎勵試算</h2>
                        <p class="text-sm text-stone-500 mb-6">
                            危老條例提供最高由基準容積 1.3 倍或原建築容積 1.15 倍的獎勵。輸入您的土地資訊查看預估效果。
                        </p>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">土地面積 (坪)</label>
                                <input type="number" id="input-area" value="30" class="w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:outline-none" oninput="updateChart()">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-stone-700 mb-1">法定容積率 (%)</label>
                                <select id="input-ratio" class="w-full px-3 py-2 border border-stone-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:outline-none" onchange="updateChart()">
                                    <option value="200">住三 (225% - 台北範例)</option>
                                    <option value="300" selected>商二 (300% - 通用範例)</option>
                                    <option value="560">商三 (560% - 高密度)</option>
                                    <option value="150">住二 (150% - 低密度)</option>
                                </select>
                                <p class="text-xs text-stone-400 mt-1">* 實際容積率請依當地土地使用分區管制為準</p>
                            </div>

                            <div class="pt-4 border-t border-stone-100">
                                <h4 class="font-semibold text-stone-700 mb-2 text-sm">獎勵項目預估 (最高40%)</h4>
                                <div class="space-y-2">
                                    <label class="flex items-center space-x-2 text-sm">
                                        <input type="checkbox" checked class="form-checkbox text-orange-600 rounded" disabled>
                                        <span>基準容積獎勵 (Max 30%)</span>
                                    </label>
                                    <label class="flex items-center space-x-2 text-sm">
                                        <input type="checkbox" id="check-time-bonus" checked class="form-checkbox text-orange-600 rounded" onchange="updateChart()">
                                        <span>時程/規模獎勵 (Max 10%)</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="bg-orange-50 p-6 rounded-xl border border-orange-100">
                        <h3 class="font-bold text-orange-800 mb-2">其他優惠</h3>
                        <ul class="space-y-3 text-sm text-orange-900">
                            <li class="flex items-start gap-2">
                                <i class="ph ph-coins mt-1"></i>
                                <span><strong>地價稅：</strong>重建期間免徵，重建後減半徵收2年。</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="ph ph-house-line mt-1"></i>
                                <span><strong>房屋稅：</strong>重建後減半徵收最長12年。</span>
                            </li>
                            <li class="flex items-start gap-2">
                                <i class="ph ph-hand-coins mt-1"></i>
                                <span><strong>補助費用：</strong>耐震評估補助、重建計畫擬定補助（每案最高5.5萬）。</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Chart Visualization -->
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-stone-200 flex flex-col justify-center">
                    <div class="mb-4">
                        <h3 class="text-lg font-bold text-stone-800">可建坪數預估比較</h3>
                        <p class="text-sm text-stone-500">比較「原法定容積」與「危老獎勵後」的可建築總樓地板面積 (不含免計容積)。</p>
                    </div>
                    
                    <div class="flex-grow flex items-center justify-center bg-stone-50 rounded-lg p-4">
                        <div class="chart-container">
                            <canvas id="incentiveChart"></canvas>
                        </div>
                    </div>

                    <div class="mt-4 grid grid-cols-2 gap-4 text-center">
                        <div class="p-3 bg-stone-100 rounded-lg">
                            <p class="text-xs text-stone-500">原法定總樓地板</p>
                            <p id="val-original" class="text-xl font-bold text-stone-700">- 坪</p>
                        </div>
                        <div class="p-3 bg-orange-100 rounded-lg">
                            <p class="text-xs text-orange-600">獎勵後總樓地板</p>
                            <p id="val-new" class="text-xl font-bold text-orange-700">- 坪</p>
                        </div>
                    </div>
                    <p class="text-xs text-stone-400 mt-2 text-center">* 此為概算，未包含陽台、梯廳等免計容積部分 (通常約 +1.6倍)。實際數值需建築師精算。</p>
                </div>
            </div>
        </section>

        <!-- VIEW 3: Subsidies & Tax Benefits -->
        <section id="view-subsidies" class="hidden space-y-8 animate-fade-in">
            <div class="grid lg:grid-cols-2 gap-8">
                
                <!-- Financial Calculator Card -->
                <div class="bg-white p-8 rounded-xl shadow-lg border border-stone-200">
                    <h2 class="text-2xl font-bold text-stone-800 mb-4 flex items-center gap-2">
                        <i class="ph ph-hand-coins text-emerald-600"></i>
                        政府現金補助試算
                    </h2>
                    <p class="text-stone-600 mb-6">政府針對重建前期的「安全鑑定」與「計畫編擬」提供定額補助，降低民眾負擔。</p>
                    
                    <div class="space-y-6">
                        <div class="p-4 bg-emerald-50 rounded-lg border border-emerald-100">
                            <h4 class="font-bold text-emerald-800 mb-3">1. 結構安全性能評估</h4>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center text-sm">
                                    <span>總樓地板面積 (m²)</span>
                                    <input type="number" id="sub-area" value="500" class="w-24 p-1 border rounded" oninput="calcSubsidy()">
                                </div>
                                <div class="flex justify-between font-bold text-stone-700">
                                    <span>初評補助預估：</span>
                                    <span id="val-sub1" class="text-emerald-600">NT$ 15,000</span>
                                </div>
                            </div>
                        </div>

                        <div class="p-4 bg-blue-50 rounded-lg border border-blue-100">
                            <h4 class="font-bold text-blue-800 mb-3">2. 重建計畫擬定補助</h4>
                            <div class="flex justify-between font-bold text-stone-700">
                                <span>定額補助：</span>
                                <span class="text-blue-600">NT$ 55,000</span>
                            </div>
                            <p class="text-xs text-blue-600 mt-2">* 依各縣市公告為準，上限通常為 5.5 萬。</p>
                        </div>

                        <div class="pt-4 border-t border-stone-100 text-center">
                            <p class="text-sm text-stone-500">前期可獲得補助總額：</p>
                            <p id="total-sub-cash" class="text-3xl font-black text-stone-800">NT$ 70,000</p>
                        </div>
                    </div>
                </div>

                <!-- Tax Benefits Interactive Card -->
                <div class="bg-white p-8 rounded-xl shadow-lg border border-stone-200">
                    <h2 class="text-2xl font-bold text-stone-800 mb-4 flex items-center gap-2">
                        <i class="ph ph-percent text-red-600"></i>
                        稅賦優惠視覺化
                    </h2>
                    <div class="mb-6 flex gap-2">
                        <button onclick="setTaxView('before')" id="btn-tax-before" class="px-4 py-2 rounded-full text-xs font-bold border border-stone-300 hover:bg-stone-100 transition">重建前</button>
                        <button onclick="setTaxView('during')" id="btn-tax-during" class="px-4 py-2 rounded-full text-xs font-bold border border-stone-300 hover:bg-stone-100 transition">重建中</button>
                        <button onclick="setTaxView('after')" id="btn-tax-after" class="px-4 py-2 rounded-full text-xs font-bold bg-stone-800 text-white transition">重建後 (首2年)</button>
                    </div>

                    <div class="space-y-4">
                        <div id="tax-viz-container" class="h-48 bg-stone-50 rounded-lg flex flex-col justify-center p-6 space-y-6">
                            <!-- Tax Progress Bars -->
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="font-bold">地價稅 (Land Tax)</span>
                                    <span id="tax-land-label">50% 減免</span>
                                </div>
                                <div class="w-full bg-stone-200 h-4 rounded-full overflow-hidden">
                                    <div id="tax-land-bar" class="h-full bg-orange-500 transition-all duration-500" style="width: 50%"></div>
                                </div>
                            </div>
                            <div>
                                <div class="flex justify-between text-sm mb-1">
                                    <span class="font-bold">房屋稅 (Property Tax)</span>
                                    <span id="tax-prop-label">50% 減免</span>
                                </div>
                                <div class="w-full bg-stone-200 h-4 rounded-full overflow-hidden">
                                    <div id="tax-prop-bar" class="h-full bg-red-500 transition-all duration-500" style="width: 50%"></div>
                                </div>
                            </div>
                        </div>
                        <div class="p-4 rounded-lg bg-stone-100">
                            <p id="tax-desc" class="text-sm text-stone-700 leading-relaxed">重建後首 2 年地價稅與房屋稅均減半徵收；若房屋於 2 年內未轉讓，房屋稅減半可延長最長至 12 年。</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Financial Assistance (Loans) -->
            <div class="bg-stone-800 text-white p-8 rounded-xl shadow-lg">
                <div class="flex flex-col md:flex-row gap-8 items-center">
                    <div class="md:w-1/3">
                        <h3 class="text-2xl font-bold mb-4">資金融通：信用保證</h3>
                        <p class="text-stone-400 text-sm">
                            內政部與財團法人中小企業信用保證基金合作，提供重建工程資金貸款信用保證，解決民眾自備款不足的問題。
                        </p>
                    </div>
                    <div class="md:w-2/3 grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div class="p-4 bg-stone-700 rounded-lg">
                            <i class="ph ph-shield-check text-2xl text-orange-400 mb-2"></i>
                            <h4 class="font-bold mb-1">每戶最高 300 萬</h4>
                            <p class="text-xs text-stone-400">信用保證成數最高 9 成。</p>
                        </div>
                        <div class="p-4 bg-stone-700 rounded-lg">
                            <i class="ph ph-bank text-2xl text-orange-400 mb-2"></i>
                            <h4 class="font-bold mb-1">利息補貼</h4>
                            <p class="text-xs text-stone-400">符合條件者可申請由地方政府提供之貸款利息補貼。</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW 4: Urban Planning Query -->
        <section id="view-query" class="hidden space-y-8 animate-fade-in">
            <div class="bg-white p-8 rounded-xl shadow-lg border border-stone-200">
                <div class="text-center mb-8">
                    <h2 class="text-3xl md:text-4xl font-bold text-stone-800 mb-4">如何知道房子是否在「都市計畫區」？</h2>
                    <p class="text-lg text-stone-600">危老重建的第一道門檻，就是確認土地分區。這裡教您如何快速查詢。</p>
                </div>

                <!-- Method Navigation -->
                <div class="flex flex-wrap justify-center gap-4 mb-10 border-b border-stone-200 pb-4">
                    <button onclick="switchQueryTab('online')" id="tab-online" class="method-tab-active px-6 py-3 text-lg transition-all">線上即時查</button>
                    <button onclick="switchQueryTab('official')" id="tab-official" class="px-6 py-3 text-lg text-stone-500 hover:text-stone-800 transition-all">申請正式證明</button>
                    <button onclick="switchQueryTab('interpret')" id="tab-interpret" class="px-6 py-3 text-lg text-stone-500 hover:text-stone-800 transition-all">查詢結果判讀</button>
                </div>

                <!-- VIEW: Online Systems -->
                <div id="query-online" class="space-y-6">
                    <div class="bg-stone-50 p-6 rounded-xl border border-stone-200">
                        <h3 class="text-2xl font-bold mb-4 flex items-center gap-2">
                            <i class="ph ph-globe text-blue-600"></i>
                            方式一：全國國土規劃地理資訊系統
                        </h3>
                        <p class="text-stone-600 mb-6">這是內政部提供的官方地圖系統，可以輸入地址直接查看土地分區色彩圖。</p>
                        
                        <div class="bg-white p-6 rounded-xl border-2 border-dashed border-stone-200 text-center">
                            <p class="font-bold text-stone-800 mb-2">【快速進入系統】</p>
                            <a href="https://landvis.cpami.gov.tw/landvis/index.jsp" target="_blank" class="inline-flex items-center gap-2 bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition">
                                前往內政部地圖系統 <i class="ph ph-arrow-square-out"></i>
                            </a>
                            <p class="text-xs text-stone-400 mt-3">* 操作提示：選擇「土地使用分區」圖層，輸入您的房屋地址即可。</p>
                        </div>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-stone-100">
                            <h3 class="font-bold text-lg mb-4">各縣市政府查詢入口</h3>
                            <p class="text-sm text-stone-500 mb-4">地方政府的資料通常更新最快且最詳細。</p>
                            <div class="space-y-3">
                                <a href="https://www.zone.gov.taipei/" target="_blank" class="flex justify-between items-center p-3 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition">
                                    <span>台北市：都市計畫整合查詢</span>
                                    <i class="ph ph-caret-right"></i>
                                </a>
                                <a href="https://zoning.planning.ntpc.gov.tw/" target="_blank" class="flex justify-between items-center p-3 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition">
                                    <span>新北市：都市計畫查詢系統</span>
                                    <i class="ph ph-caret-right"></i>
                                </a>
                                <a href="https://gis.tycg.gov.tw/" target="_blank" class="flex justify-between items-center p-3 border rounded-lg hover:border-blue-500 hover:bg-blue-50 transition">
                                    <span>桃園市：住宅及都市發展GIS</span>
                                    <i class="ph ph-caret-right"></i>
                                </a>
                                <select onchange="if(this.value) window.open(this.value, '_blank')" class="w-full p-3 border rounded-lg bg-white text-sm">
                                    <option value="">更多縣市選擇...</option>
                                    <option value="https://urban-zone.taichung.gov.tw/">台中市</option>
                                    <option value="https://up.tainan.gov.tw/">台南市</option>
                                    <option value="https://puzon.kcg.gov.tw/">高雄市</option>
                                </select>
                            </div>
                        </div>

                        <div class="bg-blue-900 text-white p-6 rounded-xl shadow-lg relative overflow-hidden">
                            <i class="ph ph-magnifying-glass absolute -right-4 -bottom-4 text-9xl opacity-10"></i>
                            <h3 class="font-bold text-lg mb-2">還有更簡單的方法嗎？</h3>
                            <p class="text-blue-100 text-sm leading-relaxed">
                                您可以直接看您的<strong>「土地登記謄本」</strong>。<br><br>
                                如果在「使用分區」欄位寫的是：<br>
                                <span class="bg-white/20 px-2 rounded">「空白」</span> 或 <span class="bg-white/20 px-2 rounded">「都市土地」</span><br>
                                通常就代表該地塊位於都市計畫區內。
                            </p>
                        </div>
                    </div>
                </div>

                <!-- VIEW: Official Document -->
                <div id="query-official" class="hidden space-y-6">
                    <div class="bg-stone-50 p-8 rounded-xl border border-stone-200">
                        <h3 class="text-2xl font-bold mb-4 flex items-center gap-2">
                            <i class="ph ph-file-text text-red-600"></i>
                            法律上的黃金標準：都市計畫土地使用分區證明
                        </h3>
                        <p class="text-stone-600 mb-8">
                            線上查詢結果僅供參考。如果您要進行「危老重建」申請或房屋買賣，必須向政府申請這份正式的紙本證明。
                        </p>

                        <div class="flex flex-col md:flex-row gap-10 items-start">
                            <!-- Steps -->
                            <div class="md:w-1/2 space-y-6">
                                <div class="flex gap-4">
                                    <div class="w-8 h-8 rounded-full bg-stone-800 text-white flex items-center justify-center flex-shrink-0 font-bold">1</div>
                                    <div>
                                        <h4 class="font-bold">臨櫃申請</h4>
                                        <p class="text-sm text-stone-500">前往各鄉、鎮、市、區公所之「建設課」或各縣市政府「都發局」櫃台。</p>
                                    </div>
                                </div>
                                <div class="flex gap-4">
                                    <div class="w-8 h-8 rounded-full bg-stone-800 text-white flex items-center justify-center flex-shrink-0 font-bold">2</div>
                                    <div>
                                        <h4 class="font-bold">提供地號</h4>
                                        <p class="text-sm text-stone-500">不需權狀，只需提供該房屋所在地的「地段」與「地號」（例如：信義段二小段123地號）。</p>
                                    </div>
                                </div>
                                <div class="flex gap-4">
                                    <div class="w-8 h-8 rounded-full bg-stone-800 text-white flex items-center justify-center flex-shrink-0 font-bold">3</div>
                                    <div>
                                        <h4 class="font-bold">繳納規費</h4>
                                        <p class="text-sm text-stone-500">通常第一份約 20~100 元不等，立等可取或隔日領取。</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Mockup Example -->
                            <div class="md:w-1/2 bg-white p-6 rounded-lg border-2 border-stone-200 shadow-inner rotate-1">
                                <div class="text-center mb-4">
                                    <h5 class="text-stone-400 text-xs tracking-widest uppercase">模擬證明書樣式</h5>
                                    <div class="official-stamp text-xs mt-1">都市計畫證明章</div>
                                </div>
                                <div class="space-y-4 text-sm font-mono text-stone-700">
                                    <div class="flex justify-between border-b pb-1"><span>土地標示：</span><span>XX市XX區XX段...</span></div>
                                    <div class="flex justify-between border-b pb-1"><span>使用分區：</span><span class="font-bold text-blue-700">第三種住宅區 (住三)</span></div>
                                    <div class="flex justify-between border-b pb-1"><span>容積率：</span><span>225%</span></div>
                                    <div class="flex justify-between border-b pb-1"><span>備註：</span><span>本案位於都市計畫區內</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- VIEW: Interpret Result -->
                <div id="query-interpret" class="hidden space-y-6">
                    <div class="bg-stone-50 p-8 rounded-xl border border-stone-200">
                        <h3 class="text-2xl font-bold mb-6">看懂查詢結果：我是不是都市計畫區？</h3>
                        
                        <div class="grid md:grid-cols-2 gap-8">
                            <!-- Positive Indicators -->
                            <div class="p-6 bg-green-50 rounded-xl border border-green-100">
                                <h4 class="font-bold text-green-800 mb-4 flex items-center gap-2">
                                    <i class="ph ph-check-circle-fill"></i> 代表「是」都市計畫區
                                </h4>
                                <ul class="space-y-3 text-sm text-green-700">
                                    <li class="flex items-start gap-2">
                                        <i class="ph ph-dot-outline-fill mt-1"></i>
                                        <span><strong>看到明確分區：</strong>例如「第一/二/三種住宅區」、「商業區」、「工業區」。</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="ph ph-dot-outline-fill mt-1"></i>
                                        <span><strong>看到容積率/建蔽率：</strong>只要有這些數值，通常就是都市計畫。</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="ph ph-dot-outline-fill mt-1"></i>
                                        <span><strong>地圖呈彩色塊狀：</strong>都市計畫圖通常用鮮豔色彩（黃、紅、紫、藍）區分不同性質。</span>
                                    </li>
                                </ul>
                            </div>

                            <!-- Negative Indicators -->
                            <div class="p-6 bg-red-50 rounded-xl border border-red-100">
                                <h4 class="font-bold text-red-800 mb-4 flex items-center gap-2">
                                    <i class="ph ph-x-circle-fill"></i> 代表「不是」都市計畫區
                                </h4>
                                <ul class="space-y-3 text-sm text-red-700">
                                    <li class="flex items-start gap-2">
                                        <i class="ph ph-dot-outline-fill mt-1"></i>
                                        <span><strong>看到「非都市土地」：</strong>通常指農耕、山坡、特定目的事業用地。</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="ph ph-dot-outline-fill mt-1"></i>
                                        <span><strong>看到「甲/乙/丙/丁種建築用地」：</strong>這些是「非都市土地」的開發分類，不適用危老條例。</span>
                                    </li>
                                    <li class="flex items-start gap-2">
                                        <i class="ph ph-dot-outline-fill mt-1"></i>
                                        <span><strong>查詢結果顯示空白：</strong>代表該區可能尚未實施都市計畫或屬於保護區。</span>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <div class="mt-8 p-6 bg-amber-50 rounded-xl border border-amber-200">
                            <p class="text-amber-800 font-bold mb-2">💡 重點叮嚀：</p>
                            <p class="text-amber-700 text-sm">
                                只有屬於<strong>「都市計畫區」</strong>的土地，才符合「危老重建」的第一項申請門檻。如果您發現土地屬於「非都市土地」，則需要查詢各地的農舍改建或相關鄉村建築法規。
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- VIEW 5: Process Roadmap -->
        <section id="view-process" class="hidden space-y-8 animate-fade-in">
             <div class="bg-white p-8 rounded-xl shadow-lg border border-stone-200">
                <h2 class="text-2xl font-bold text-stone-800 mb-6 flex items-center gap-2">
                    <i class="ph ph-steps text-orange-600"></i>
                    危老重建流程圖
                </h2>
                <p class="text-stone-600 mb-8 max-w-3xl">
                    相較於都市更新（Urban Renewal），危老重建的流程相對單純快速，免經由都更審議會，原則上只要所有權人100%同意，即可快速通關。
                </p>

                <div class="relative">
                    <!-- Vertical Line (Desktop) / Horizontal connection hidden for simplicity, using flex gap -->
                    <div class="absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-stone-200 -translate-x-1/2 hidden md:block"></div>

                    <div class="space-y-8">
                        <!-- Step 1 -->
                        <div class="relative flex flex-col md:flex-row items-center md:justify-between group">
                            <div class="md:w-5/12 p-4 bg-stone-50 border border-stone-200 rounded-lg shadow-sm hover:shadow-md transition step-card md:text-right">
                                <h3 class="font-bold text-lg text-stone-800">1. 確認意願與初步評估</h3>
                                <p class="text-sm text-stone-600 mt-2">確認所有權人意願，並委託專業機構進行耐震能力初步評估 (未達乙級)。</p>
                            </div>
                            <div class="absolute left-4 md:left-1/2 -translate-x-1/2 w-8 h-8 bg-orange-500 rounded-full border-4 border-white shadow flex items-center justify-center text-white font-bold text-sm z-10">1</div>
                            <div class="md:w-5/12 md:block hidden"></div> <!-- Spacer -->
                        </div>

                        <!-- Step 2 -->
                        <div class="relative flex flex-col md:flex-row items-center md:justify-between group">
                            <div class="md:w-5/12 md:block hidden"></div> <!-- Spacer -->
                            <div class="absolute left-4 md:left-1/2 -translate-x-1/2 w-8 h-8 bg-orange-500 rounded-full border-4 border-white shadow flex items-center justify-center text-white font-bold text-sm z-10">2</div>
                            <div class="md:w-5/12 p-4 bg-stone-50 border border-stone-200 rounded-lg shadow-sm hover:shadow-md transition step-card">
                                <h3 class="font-bold text-lg text-stone-800">2. 擬定重建計畫</h3>
                                <p class="text-sm text-stone-600 mt-2">取得100%同意書，委託建築師擬定重建計畫（包含容積獎勵項目申請）。</p>
                            </div>
                        </div>

                        <!-- Step 3 -->
                        <div class="relative flex flex-col md:flex-row items-center md:justify-between group">
                            <div class="md:w-5/12 p-4 bg-stone-50 border border-stone-200 rounded-lg shadow-sm hover:shadow-md transition step-card md:text-right">
                                <h3 class="font-bold text-lg text-stone-800">3. 申請核准</h3>
                                <p class="text-sm text-stone-600 mt-2">向地方政府建管處提出申請。審查期短，通常約 1-2 個月可核准。</p>
                            </div>
                            <div class="absolute left-4 md:left-1/2 -translate-x-1/2 w-8 h-8 bg-orange-500 rounded-full border-4 border-white shadow flex items-center justify-center text-white font-bold text-sm z-10">3</div>
                            <div class="md:w-5/12 md:block hidden"></div> <!-- Spacer -->
                        </div>

                        <!-- Step 4 -->
                        <div class="relative flex flex-col md:flex-row items-center md:justify-between group">
                            <div class="md:w-5/12 md:block hidden"></div> <!-- Spacer -->
                            <div class="absolute left-4 md:left-1/2 -translate-x-1/2 w-8 h-8 bg-teal-500 rounded-full border-4 border-white shadow flex items-center justify-center text-white font-bold text-sm z-10">4</div>
                            <div class="md:w-5/12 p-4 bg-teal-50 border border-teal-100 rounded-lg shadow-sm hover:shadow-md transition step-card">
                                <h3 class="font-bold text-teal-800">4. 申請建照與施工</h3>
                                <p class="text-sm text-teal-700 mt-2">重建計畫核准後，於期限內申請建築執照，即可動工興建。</p>
                            </div>
                        </div>
                    </div>
                </div>
             </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="mb-2">本工具僅供參考，實際法規與數據請以內政部營建署及各地方政府公告為準。</p>
            <p class="text-sm">&copy; 2024 危老重建評估指南 Interactive Guide</p>
        </div>
    </footer>

    <!-- Logic Script -->
    <script>
        // --- Tab Switching Logic ---
        function switchTab(tabId) {
            // Update Navigation UI
            const navIds = ['nav-eligibility', 'nav-incentives', 'nav-subsidies', 'nav-query', 'nav-process'];
            navIds.forEach(id => {
                const el = document.getElementById(id);
                if(id === 'nav-' + tabId) {
                    el.classList.add('active-tab', 'text-stone-700');
                    el.classList.remove('text-stone-500');
                } else {
                    el.classList.remove('active-tab', 'text-stone-700');
                    el.classList.add('text-stone-500');
                }
            });

            // Update View Visibility
            const viewIds = ['view-eligibility', 'view-incentives', 'view-subsidies', 'view-query', 'view-process'];
            viewIds.forEach(id => {
                const el = document.getElementById(id);
                if(id === 'view-' + tabId) {
                    el.classList.remove('hidden');
                } else {
                    el.classList.add('hidden');
                }
            });

            // Initialize charts/calculations when switching to specific tabs
            if(tabId === 'incentives') {
                updateChart();
            } else if(tabId === 'subsidies') {
                calcSubsidy();
            }
        }

        // --- Query Tab Switching Logic ---
        function switchQueryTab(tabId) {
            const tabs = ['online', 'official', 'interpret'];
            tabs.forEach(t => {
                const viewEl = document.getElementById(`query-${t}`);
                const btnEl = document.getElementById(`tab-${t}`);
                if(t === tabId) {
                    viewEl.classList.remove('hidden');
                    btnEl.className = "method-tab-active px-6 py-3 text-lg transition-all";
                } else {
                    viewEl.classList.add('hidden');
                    btnEl.className = "px-6 py-3 text-lg text-stone-500 hover:text-stone-800 transition-all";
                }
            });
        }

        // --- Eligibility Quiz Logic ---
        const questions = [
            {
                id: 1,
                text: "您的房屋是否位於「都市計畫區」內？",
                subtext: "危老條例僅適用於都市計畫區內的土地與建築。",
                options: [
                    { text: "是", next: 2, value: true },
                    { text: "否 / 不確定", next: 'fail_zone', value: false }
                ]
            },
            {
                id: 2,
                text: "這棟建築物是否具有歷史、文化保存價值？",
                subtext: "若是古蹟或經指定需保存之建築，無法拆除重建。",
                options: [
                    { text: "是 (古蹟/保存區)", next: 'fail_history', value: false },
                    { text: "否 (一般建築)", next: 3, value: true }
                ]
            },
            {
                id: 3,
                text: "建築物屋齡是否超過 30 年？",
                subtext: "屋齡是判斷老舊的重要指標之一。",
                options: [
                    { text: "是，超過 30 年", next: 4, value: true },
                    { text: "否，未滿 30 年", next: 'check_danger', value: false } // Check danger path specifically
                ]
            },
            {
                id: 4,
                text: "建築物是否有安裝電梯？",
                subtext: "屋齡30年以上且無電梯者，符合「老舊」定義。",
                options: [
                    { text: "無電梯", next: 5, value: true }, // High potential
                    { text: "有電梯", next: 'check_seismic', value: false }
                ]
            },
            {
                id: 5,
                text: "您是否有把握取得 100% 土地與建物所有權人同意？",
                subtext: "危老重建需全體同意，不同於都更的多數決。",
                options: [
                    { text: "有信心 (100%)", next: 'success', value: true },
                    { text: "很困難 (部分反對)", next: 'advise_renewal', value: false }
                ]
            },
            // Special Branch: Not 30 years old, but maybe Dangerous?
            {
                id: 'check_danger',
                text: "建築物是否經評估為「危險」或「需強制拆除」？",
                subtext: "若被貼紅黃單，或經評估結構極度危險，屋齡不限。",
                options: [
                    { text: "是 (紅黃單/危樓)", next: 5, value: true },
                    { text: "否", next: 'fail_age', value: false }
                ]
            },
            // Special Branch: 30 years + Elevator -> Check Seismic
            {
                id: 'check_seismic',
                text: "耐震能力評估是否未達標準？",
                subtext: "若有電梯，需經詳細評估確認結構需改善且無改善效益。",
                options: [
                    { text: "是 (耐震不足)", next: 5, value: true },
                    { text: "否 / 結構尚可", next: 'fail_safe', value: false }
                ]
            }
        ];

        // Endings
        const results = {
            'success': {
                title: "符合危老重建潛力！",
                desc: "您的條件極可能符合危老條例！建議盡快尋找專業建築師進行「耐震初評」並擬定重建計畫。",
                icon: "🎉",
                color: "text-green-600"
            },
            'advise_renewal': {
                title: "建議考慮「都市更新」",
                desc: "由於難以取得 100% 同意，危老條例可能不適用。您可以考慮走「都市更新」程序，僅需多數決（如80%）即可申請。",
                icon: "🏢",
                color: "text-blue-600"
            },
            'fail_zone': {
                title: "可能不適用 (非都市計畫區)",
                desc: "危老條例僅適用於都市計畫區。請向當地地政事務所確認您的土地分區。",
                icon: "🚫",
                color: "text-stone-500"
            },
            'fail_history': {
                title: "不適用 (保存建築)",
                desc: "具文化資產價值之建築受文資法保護，不得任意改建。",
                icon: "🏛️",
                color: "text-stone-500"
            },
            'fail_age': {
                title: "資格不符 (屋齡/安全)",
                desc: "若屋齡未滿30年且結構安全無虞，暫不符合危老條件。",
                icon: "⏳",
                color: "text-stone-500"
            },
            'fail_safe': {
                title: "資格不符 (結構安全)",
                desc: "若屋齡雖高但有電梯，且耐震能力尚可，則不符合「危險或老舊」之定義。",
                icon: "💪",
                color: "text-stone-500"
            }
        };

        let currentStep = 0;
        let totalStepsEstimate = 5;

        function renderQuiz(stepId) {
            const container = document.getElementById('quiz-container');
            const question = questions.find(q => q.id === stepId);
            
            if (!question) {
                // Must be a result string
                showResult(stepId);
                return;
            }

            // Update Progress
            let progress = 0;
            if(typeof stepId === 'number') {
                progress = ((stepId - 1) / totalStepsEstimate) * 100;
            } else {
                progress = 80;
            }
            document.getElementById('progress-bar').style.width = `${progress}%`;

            let html = `
                <div class="animate-fade-in">
                    <h3 class="text-xl md:text-2xl font-bold text-stone-800 mb-2">${question.text}</h3>
                    <p class="text-stone-500 mb-8">${question.subtext}</p>
                    <div class="grid md:grid-cols-2 gap-4">
                        ${question.options.map(opt => `
                            <button onclick="renderQuiz('${opt.next}')" 
                                class="p-4 border-2 border-stone-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition text-left group">
                                <span class="block font-bold text-stone-700 group-hover:text-orange-700">${opt.text}</span>
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
            container.innerHTML = html;
        }

        function showResult(resultKey) {
            document.getElementById('progress-bar').style.width = '100%';
            document.getElementById('quiz-container').classList.add('hidden');
            
            const resultDiv = document.getElementById('result-container');
            const res = results[resultKey];
            
            document.getElementById('result-icon').innerHTML = res.icon;
            document.getElementById('result-title').innerText = res.title;
            document.getElementById('result-title').className = `text-2xl font-bold mb-2 ${res.color}`;
            document.getElementById('result-desc').innerText = res.desc;
            
            resultDiv.classList.remove('hidden');
        }

        function resetQuiz() {
            document.getElementById('result-container').classList.add('hidden');
            document.getElementById('quiz-container').classList.remove('hidden');
            renderQuiz(1);
        }

        // --- Incentives Chart Logic ---
        let incentiveChart;

        function initChart() {
            const ctx = document.getElementById('incentiveChart').getContext('2d');
            incentiveChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['原法定容積', '危老重建後'],
                    datasets: [
                        {
                            label: '基本容積',
                            data: [0, 0],
                            backgroundColor: '#a8a29e', // stone-400
                        },
                        {
                            label: '容積獎勵 (Max 40%)',
                            data: [0, 0],
                            backgroundColor: '#ea580c', // orange-600
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y.toFixed(1) + ' 坪';
                                }
                            }
                        }
                    },
                    scales: {
                        x: { stacked: true },
                        y: { 
                            stacked: true,
                            title: {
                                display: true,
                                text: '總樓地板面積 (坪)'
                            }
                        }
                    }
                }
            });
            updateChart();
        }

        function updateChart() {
            const area = parseFloat(document.getElementById('input-area').value) || 0;
            const ratio = parseFloat(document.getElementById('input-ratio').value) || 300; // Percentage
            const hasTimeBonus = document.getElementById('check-time-bonus').checked;

            // Calculations
            // 1. Original Volume
            const originalVolume = area * (ratio / 100);

            // 2. Bonus Calculation
            // Base Bonus Cap: 30% of base
            // Time/Scale Bonus Cap: 10%
            // Total Cap: 1.3x Base or 1.15x Original Building + 10%
            // We use standard 1.3x base cap + 10% time bonus for simplified estimation
            // Max bonus percentage = 30% + (hasTimeBonus ? 10% : 0%) = 40% max theoretically
            // But realistically, base bonus (green building, smart building, seismic) is hard to max out.
            // Let's assume a realistic average achievement of 20% base bonus + 6% time bonus for the demo.
            
            // However, the tool shows "Potential Max". So let's show Max.
            const maxBaseBonusPct = 0.30; 
            const timeBonusPct = hasTimeBonus ? 0.10 : 0;
            
            const bonusVolume = originalVolume * (maxBaseBonusPct + timeBonusPct);
            const totalNewVolume = originalVolume + bonusVolume;

            // Update DOM text
            document.getElementById('val-original').innerText = originalVolume.toFixed(1) + " 坪";
            document.getElementById('val-new').innerText = totalNewVolume.toFixed(1) + " 坪";

            // Update Chart
            incentiveChart.data.datasets[0].data = [originalVolume, originalVolume]; // Base
            incentiveChart.data.datasets[1].data = [0, bonusVolume]; // Bonus
            incentiveChart.update();
        }

        // --- Subsidy & Tax Logic ---
        function calcSubsidy() {
            const area = parseFloat(document.getElementById('sub-area').value) || 0;
            let assessVal = 12000;
            if(area > 1000) assessVal = 15000;
            else if (area < 500) assessVal = 6000;
            
            document.getElementById('val-sub1').innerText = `NT$ ${assessVal.toLocaleString()}`;
            document.getElementById('total-sub-cash').innerText = `NT$ ${(assessVal + 55000).toLocaleString()}`;
        }

        const taxStates = {
            'before': { land: 100, prop: 100, label: '全額徵收', desc: '重建前依現行稅率課徵，無減免優惠。' },
            'during': { land: 0, prop: 0, label: '免徵', desc: '重建期間，地價稅因無法使用而免徵；建築物已拆除亦無房屋稅。' },
            'after': { land: 50, prop: 50, label: '50% 減免', desc: '重建後首 2 年地價稅與房屋稅均減半。房屋稅最高可享 12 年減半。' }
        };

        function setTaxView(mode) {
            const s = taxStates[mode];
            const btns = ['before', 'during', 'after'];
            btns.forEach(b => {
                const el = document.getElementById(`btn-tax-${b}`);
                if(b === mode) {
                    el.className = "px-4 py-2 rounded-full text-xs font-bold bg-stone-800 text-white transition";
                } else {
                    el.className = "px-4 py-2 rounded-full text-xs font-bold border border-stone-300 hover:bg-stone-100 transition";
                }
            });

            document.getElementById('tax-land-bar').style.width = `${s.land}%`;
            document.getElementById('tax-prop-bar').style.width = `${s.prop}%`;
            document.getElementById('tax-land-label').innerText = s.label;
            document.getElementById('tax-prop-label').innerText = s.label;
            document.getElementById('tax-desc').innerText = s.desc;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz(1);
            initChart();
            calcSubsidy();
        });

    </script>
</body>
</html>